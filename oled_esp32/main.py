import machine
from machine import Pin, SoftI2C
import time

i2c = SoftI2C(scl=Pin(22), sda=Pin(23), freq=100000)

def cmd(cmd):
	i2c.writeto(60,bytearray([0b10000000,cmd]))


def cmds(cmdlist):
	for reg in cmdlist:
		i2c.writeto(60,bytearray([0b10000000,reg]))

print('Found I2C devices:',i2c.scan())


cmd(0xAE)			#Display OFF
cmds([0x20,0x00])	#Page addressing mode;  00 - horiz, 01 - vert, 10 - page
cmd(0xB0)			#page address: 0 (B0...B7)
cmd(0xC8)			#piece of bullshit, go fuck
cmd(0x00)			#Lower Column Start Address for Page Addressing Mode                
cmd(0x10)			#Higher Column Start Address for Page Addressing Mode                
cmds([0x22,0,7])
cmd(0x40)			#RAM display start line register (0-63)  0b01xxxxxx
cmds([0x81,0xff])	#contrast
cmd(0xA1)			#Segment Re-map  0b1010000x
cmd(0xA7)			#normal/inverse 0b1010011X   0 - normal, 1 - inverse
cmds([0xA8,0x3F])	#another piece of bullshit, suck my dick
cmd(0xA4)			#Output follows(A4)/ignores(A5) RAM content
cmds([0xD3,0])		#Set Display Offset (0-63)
cmds([0xD5,0xF0])	#set freq & divide ratio: A[3:0] - ratio, A[7:4] - freq
cmds([0xD9,0x22])	#Set Pre-charge Period (unknown fucking bullshit)
cmds([0xDA,0x12])	#Set COM Pins Hardware Configuration
cmds([0xDB,0x20])	#VCOMH Deselect Level 	
cmds([0x8D,0x14])	#Charge Pump Setting A=0b00010X00   0 - disable, 1 - enable
cmd(0xAF)			#Display ON 


i2c.writeto(60,bytearray([0b01000000]+[0 for x in range(1024)]))


i2c.writeto(60,bytearray([0b01000000]+[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,16,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,32,0,32,0,128,0,10,160,0,128,18,164,192,128,4,8,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,32,128,0,64,0,160,0,0,160,0,128,0,128,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,16,0,0,0,64,128,32,128,144,32,64,32,68,152,32,64,164,128,8,32,0,16,0,128,8,0,0,72,0,0,64,2,16,64,1,16,64,0,0,32,130,16,0,0,68,144,0,4,208,0,2,84,0,106,128,250,255,160,4,32,2,144,0,0,0,0,66,0,0,16,0,0,32,0,128,0,4,8,64,0,0,72,0,16,66,0,144,2,32,201,16,84,65,92,176,244,225,226,252,241,234,104,210,172,64,218,32,128,36,128,36,0,200,0,0,32,0,0,0,0,0,0,0,80,0,164,0,64,18,164,0,218,160,53,244,246,252,253,255,252,251,246,93,82,236,26,161,34,68,154,0,88,161,0,164,25,64,144,69,144,66,16,69,32,202,0,105,0,164,154,0,74,144,36,192,10,80,196,17,164,109,208,255,255,255,255,200,18,64,144,2,64,4,40,0,81,132,16,128,2,72,0,168,2,8,208,1,164,16,69,160,10,80,162,68,154,32,85,170,17,215,52,221,179,111,219,191,95,255,215,174,57,198,89,166,8,82,148,34,72,144,33,132,16,196,0,0,0,0,0,132,41,144,36,145,132,42,72,82,166,29,218,55,237,95,255,223,187,231,189,215,45,218,85,212,37,90,196,57,196,43,200,42,89,194,156,98,140,185,66,84,170,80,133,186,68,186,64,85,162,92,162,92,161,110,216,239,250,255,255,255,255,255,255,255,253,244,202,41,212,41,194,24,100,145,36,66,169,18,68,212,137,50,196,34,156,33,236,1,90,162,76,89,162,85,37,90,213,38,217,34,221,34,173,74,89,166,88,167,216,19,100,149,109,144,101,138,53,72,178,68,24,228,1,0,0,0,0,0,2,42,128,26,64,91,160,149,74,161,174,137,90,85,162,174,74,185,166,45,218,43,212,61,211,164,93,162,93,178,69,125,194,188,171,82,172,83,237,170,221,162,188,67,220,181,171,84,239,185,246,213,255,254,255,255,255,255,255,127,127,255,191,255,191,255,127,255,254,249,246,221,162,109,218,41,86,233,50,198,184,163,92,161,86,44,211,44,83,196,59,68,221,35,220,35,220,163,44,211,44,213,37,237,26,229,26,228,21,223,80,165,86,204,51,204,51,68,253,34,29,2,0,0,0,0,0,0,0,0,0,2,1,44,146,36,202,32,174,89,34,229,26,213,165,90,165,107,170,189,67,252,69,219,188,35,221,178,47,218,178,205,187,218,165,254,86,233,190,107,218,247,220,251,245,255,126,223,63,239,31,187,167,10,117,134,93,163,29,226,22,109,146,77,43,202,61,203,59,87,111,222,191,125,254,235,250,218,244,167,220,117,203,180,237,179,76,253,145,110,209,166,189,34,221,34,221,170,179,108,211,173,234,43,220,171,106,221,43,250,45,59,21,29,7,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,13,2,13,34,14,57,38,45,91,44,91,52,111,218,53,127,229,61,255,29,250,63,214,61,255,94,123,239,191,47,223,23,111,149,43,98,141,50,69,186,1,100,138,57,98,133,90,65,94,160,37,77,178,21,162,10,178,4,93,17,37,218,37,203,58,197,91,215,43,223,107,223,127,254,174,123,255,254,189,251,253,238,187,253,183,109,222,59,66,61,67,4,7,1,7,0,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))

